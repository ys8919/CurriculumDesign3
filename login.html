<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="layui/css/layui.css">
    <link rel="stylesheet" href="css/login.css">

    <script src="js/axios.js"></script>
    <script src="js/vue.min.js"></script>
</head>
<body bgcolor="#c2c2c2" >

<form class="layui-form" action="javascript:">
    <div class="container" id="login" >
        <div class="layui-form-item">
            <h1 class="layui-text ">竞赛报名</h1>
        </div>
        <div class="  layui-form-item">
            <h2 class="layui-text ">登录</h2>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户名</label>
            <div class="layui-input-block">
                <input type="text" name="" required  lay-verify="required" v-bind:placeholder="username1" v-model="userId"  autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">密 &nbsp;&nbsp;码</label>
            <div class="layui-input-inline">
                <input type="password" name="passwd" required lay-verify="required" v-bind:placeholder="password1" v-model="passwd"  autocomplete="off" class="layui-input">
            </div>
            <!-- <div class="layui-form-mid layui-word-aux">辅助文字</div> -->
        </div>

        <!-- 			  <div class="layui-form-item">
                            <label class="layui-form-label">记住密码</label>
                            <div class="layui-input-block">
                              <input type="checkbox" name="close" lay-skin="switch" lay-text="ON|OFF">
                            </div>
                      </div> -->

        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="formDemo" @click="loginOnclick">登陆</button>
            </div>
        </div>
        <a  class="font-set" @click="login">忘记密码?</a>  <a href="" class="font-set">立即注册</a>
    </div>
</form>

<script src="layui/layui.all.js"></script>




<script type="text/javascript">

    var vm = new Vue({
        el: '#login',
        data: {
            userId: "",
            passwd: "",
            username1: "请输入用户名",
            password1: "请输入密码",
        },
        methods: {
            loginOnclick: function() {
                let loading=layer.load(2, {
                    shade: false,
                    time: 60*1000
                });
                if(this.userId!=""&&this.passwd!=""){
                    console.log(this.userId)
                    sendPost();
                }
                function sendPost() {
                    axios.post('http://192.168.1.106:8080/CurriculumDesign3_Back/Controller/login.action',
                        {
                            userId:this.userId,
                            passwd:this.passwd,


                        }, {
                        'Content-Type':'application/json'  //如果写成contentType会报错
                    })
                        .then(response => {
                            layer.close(loading);
                            layer.open({
                                title: '提示'
                                , content: response.data.msg
                            });
                    })
                        .catch(function (error) {
                        layer.close(loading);
                        layer.open({
                            title: '失败'
                            ,content:'服务器请求失败'
                        });
                    });
                }



            },

        }

    })
</script>
</body>
</html>